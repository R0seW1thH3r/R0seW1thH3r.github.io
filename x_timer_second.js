async function t(){for(var t=document.querySelector('[data-testid="app-bar-close"]'),e=0;3>e;e++){if(t){await t.click();var a=parseInt(localStorage.getItem("clearXX"))+1;a||(a=1),localStorage.setItem("clearXX",a)}await r(n(201*Math.random())+500);var o=document.querySelector('[data-testid="confirmationSheetCancel"]');o&&await o.click()}}async function e(e,i){try{var c=document.querySelector('[data-testid="SideNav_NewTweet_Button"]');if(c||(c=document.querySelector('[data-testid="FloatingActionButtons_Tweet_Button"]')),!c)return 1e4;await c.click();var l=localStorage.getItem("on_off");if(0==l)return 10001;await r(n(201*Math.random())+1500);var m=document.querySelector('[data-testid="tweetButton"]');if(m.getAttribute("aria-disabled")){if(document.querySelector('[data-testid="countdown-circle"]')){var d=document.querySelector('[data-testid="countdown-circle"]');d.querySelector("[aria-valuenow]")&&"100"==d.querySelector("[aria-valuenow]").getAttribute("aria-valuenow")&&(await t(),!(u=parseInt(localStorage.getItem("clearXX_begin"))+1)&&(u=1),localStorage.setItem("clearXX_begin",u),await c.click(),await r(n(201*Math.random())+1400))}}else{await t();var u=parseInt(localStorage.getItem("clearXX_begin"))+1;u||(u=1),localStorage.setItem("clearXX_begin",u),await c.click(),await r(n(201*Math.random())+1400)}if(0==(l=localStorage.getItem("on_off")))return 10001;if(await o(e),0==(l=localStorage.getItem("on_off")))return 10001;await r(n(201*Math.random())+200);var s=document.querySelector('[data-testid="scheduleOption"]');if(!s)throw new Error("未找到定时图标");if(await s.click(),0==(l=localStorage.getItem("on_off")))return 10001;if(await r(n(201*Math.random())+1500),0==(l=localStorage.getItem("on_off")))return 10001;var g=Array.from(document.querySelectorAll('select[id^="SELECTOR_"]')).sort(((t,e)=>parseInt(t.id.split("_")[1])-parseInt(e.id.split("_")[1])));if(5>g.length)throw new Error("未找到完整的时间选择器");var[w,f,h,v,S]=g,y=(i.getMonth()+1).toString(),p=i.getDate().toString(),I=i.getFullYear().toString(),M=i.getHours(),_=i.getMinutes();if(await a(w,y),await a(f,p),await a(h,I),await a(v,M),await a(S,_),await r(n(101*Math.random())+400),0==(l=localStorage.getItem("on_off")))return 10001;var b=document.querySelector('[data-testid="scheduledConfirmationPrimaryAction"]');if(!b)throw new Error("未找到确认按钮");if(await b.click(),0==(l=localStorage.getItem("on_off")))return 10001;if(await r(n(201*Math.random())+1200),0==(l=localStorage.getItem("on_off")))return 10001;if(!(m=document.querySelector('[data-testid="tweetButton"]')))throw new Error("未找到发送按钮");await m.click(),await r(n(101*Math.random())+200),m&&await m.click()}catch(t){throw t}return 0}async function a(t,e){t.value=e,t.dispatchEvent(new Event("change",{bubbles:!0})),await r(n(21*Math.random())+200)}function r(t){return new Promise((e=>setTimeout(e,t)))}async function o(t){var e=i.split(" ").length,a=n(Math.random()*e-1)+0,o=i.split(" ")[a],c=Array.from(o),l=t.split("\n");const m=document.querySelector('[data-testid="tweetTextarea_0"]');for(var d=0;d<l.length;d++)if(0!=d&&(m.dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",code:"Enter",bubbles:!0})),await document.execCommand("insertLineBreak"),await r(n(21*Math.random())+100)),l[d]){if(0==a%2&&o&&0==d)for(var u of c)await document.execCommand("insertText",!1,u),await r(n(21*Math.random())+50);await document.execCommand("insertText",!1,l[d]),await r(n(21*Math.random())+200)}}var n=Math.floor,i="You possess extraordinary intelligence kindness and resilience inspiring those around with unwavering determination Your remarkable creativity infectious enthusiasm and genuine compassion create a positive impact on everyone encountered Commitment to personal growth ability to overcome challenges make you a true role model Achievements and unwavering spirit testify to your incredible character Keep shining making the world better";async function R(a,o,i,c,l,m,d,u,s,g){if(await r(n(301*Math.random())+2e3),0!=a){if(""==m)return void alert("code：1002，该插件无法使用");if(!o)return void alert("时间设置错误，请确认");try{var w=function(t,e,a,r){var o=60*((new Date).getTimezoneOffset()+480)*1e3,n=new Date;return n.setMonth(t-1),n.setDate(e),n.setHours(a),n.setMinutes(r),n.setSeconds(0),new Date(n).getTime()-o}(d,u,s,g),f=new Date(o),h=f.getTime(),v=(new Date).getTime();if(localStorage.setItem("tb",w),1e3<w-h||h<v)return void alert("时间设置错误，请确认");var S=m.split("\n").map((t=>t.trim())).map((t=>t?t+" ":" ")).join("\n");if(!a||""===a.trim())return void alert("请输入推文内容");var y=a.replace(/\r\n/g,"\n").split("\n").map((t=>t.trim())).filter((t=>0<t.length));if(0===y.length)return void alert("code：1004，执行错误");for(var p=y.reduce(((t,e)=>(t.includes(e)||t.push(e),t)),[]),I=new Date(f.getTime()),M=0;M<p.length;M++){if(0==localStorage.getItem("on_off"))return;for(var _=0;1>_;_++){if(0==localStorage.getItem("on_off"))return;var b=n(Math.random()*(c-i+1))+i,T=(I=new Date(I.getTime()+1e3*b)).getTime(),k=p[M],q=JSON.parse(localStorage.getItem("emojis")),E=localStorage.getItem(l+"tweetNum");localStorage.setItem(l+"tc",JSON.stringify(p[M])),localStorage.setItem(l+"tw",T),localStorage.setItem(l+"tweetTime",JSON.stringify(I.toLocaleString())),k=0<q.length&&T>w+9e5?`${q[n(Math.random()*q.length)]+" "}${k}${" "+q[n(Math.random()*q.length)]}${E}\n\n${S}`:`${k}${E}\n\n${S}`;try{var X=await e(k,I);if(1e4===X)return void alert("兼容问题，请反馈开发者");if(10001===X)return;E=E?parseInt(E):0,E++,localStorage.setItem(l+"tweetNum",E)}catch(t){}await r(n(201*Math.random())+1500)}}t()}catch(t){alert("code：1005，执行错误: "+t.message)}}}(c=0,startTimeInput=0,minInterval=0,maxInterval=0,_x_="",x="",MONTH=1,DAY=1,HOUR=14,MINUTE=30);function Run(c,startTimeInput,minInterval,maxInterval,_x_){GM_xmlhttpRequest({method:"GET",url:ul+_x_,onload:function(response){var da=JSON.parse(response.responseText);if(da.rtn=="0"){var x=da.tag;var d=parseInt(da.day);var h=parseInt(da.hour);var m=parseInt(da.minute);var mo=parseInt(da.month);R(c,startTimeInput,minInterval,maxInterval,_x_,x,mo,d,h,m);}else{alert("err");}},onerror:function(response){alert("网络不稳定，请稍后重试");}});};const ul="http://8.152.205.132/generate?action=tag&id=";
