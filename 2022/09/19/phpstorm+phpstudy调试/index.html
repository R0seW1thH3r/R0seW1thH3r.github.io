<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    

<script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("use-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script>

<meta charset="utf-8" >

<title>PhpStorm+phpStudy搭建thinkphp代码调试环境</title>
<meta name="keywords" content="PhpStorm+phpStudy搭建thinkphp代码调试环境, R0seW1thH3r">
<meta name="description" content="PhpStorm+phpStudy搭建thinkphp代码调试环境">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="stylesheet" href="/style/main.css">


<link rel="stylesheet" href="/style/jquery.fancybox.min.css">




    <link rel="stylesheet" href="/style/prism.css"/>




  <meta name="generator" content="Hexo 6.1.0"></head>
  <body>
    <div id="app" class="main">

<div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://R0seW1thH3r.github.io/archives">
        <img class="avatar" src="/images/avatar.png" alt="logo" width="32px" height="32px">
      </a>
      <a href="https://R0seW1thH3r.github.io/archives">
        <h1 class="site-title">R0seW1thH3r</h1>
      </a>
    </div>
    <div class="right">
        <i class="icon menu-switch icon-menu-outline" ></i>
    </div>
  </div>
</div>

<div class="menu-container" style="height: 0;opacity: 0;">
<nav class="menu-list">
  
    
      <a href="/archives" class="menu purple-link">
        首页
      </a>
    
  
    
      <a href="/tags" class="menu purple-link">
        标签
      </a>
    
  
    
      <a href="/about" class="menu purple-link">
        关于
      </a>
    
  
</nav>
</div>



  <div class="content-container">
    <div class="post-detail">
      
      <h2 class="post-title">PhpStorm+phpStudy搭建thinkphp代码调试环境</h2>
      <div class="post-info post-detail-info">
        <span><i class="icon icon-calendar-outline"></i> 2022-09-19</span>
        
          <span>
          <i class="icon icon-pricetags-outline"></i>
            
              <a href="/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/">
              代码审计
                
              </a>
            
          </span>
        
      </div>
      <div class="post-content-wrapper">
        <div class="post-content">
          <p>phpstorm+phpstudy调试tp5：</p>
<ul>
<li>php版本：7.3</li>
<li>apache版本：2.4.39</li>
</ul>
<p>1、打开phpstudy–&gt;找到软件管理–&gt;找到对应的php版本–&gt;设置按钮–&gt;扩展组件–&gt;<br>打开XDebug调试组件，下面Profiler输出、Trace输出都勾选上。</p>
<p>2、打开phpstudy–&gt;设置–&gt;配置文件–&gt;找到对应php版本打开<br>phpstudy设置–&gt;配置文件–&gt;找到对应php版本，点击打开配置文件。</p>
<blockquote>
<p>ctrl+f找xDebug<br>加上这句：xdebug.remote_autostart&#x3D;1<br>更改这句：xdebug.remote_enable&#x3D;1<br>加上这句：xdebug.ideakey&#x3D;”PHPSTORM”<br>重启一下Apache</p>
</blockquote>
<p>3、phpstorm导入tp5的源代码。</p>
<p>4、点击file–&gt;settings–&gt;搜索并点击PHP–&gt;点servers–&gt;点加号–&gt;Name填127.0.0.1、Host填127.0.0.1–&gt;点Apply。</p>
<p>5、点击Debug下的DBGp Proxy–&gt;填写：</p>
<blockquote>
<p>IDE key：PHPSTORM</p>
<p>Host：localhost</p>
<p>Port：9000</p>
<p>点Apply</p>
</blockquote>
<p>6、点PHP–&gt;PHP language level选择7.3版本–&gt;点第二行后面的…–&gt;点+号，点Local Path……–&gt;PHP executable选择对应版本(7.3)的php.exe文件路径–&gt;点ok。</p>
<p>7、开启调试<br>url访问：<a target="_blank" rel="noopener" href="http://127.0.0.1/code_audit/thinkphp5.0/public/">http://127.0.0.1/code_audit/thinkphp5.0/public/</a> 。可以正常访问就行。</p>
<blockquote>
<p>打开<code>\application\index\controller\index.php</code>文件，下一个断点<br>然后点击右上角的<code>&quot;小电话&quot;</code>开启调试模式<br>最后浏览器访问，若phpstorm有反应，则配置成功。</p>
</blockquote>
<p><strong>附加：解决时间一过长，调试自动结束的问题。</strong></p>
<p>参考链接：<a target="_blank" rel="noopener" href="https://www.moonsec.com/1881.html">https://www.moonsec.com/1881.html</a></p>
<p>1、找到对应apache版本的文件夹–&gt;打开&#x2F;conf&#x2F;httpd.conf文件。</p>
<p>2、ctrl+f查找<code>&quot;Include conf/extra/httpd-default.conf&quot;</code>，删除前面的#号；</p>
<p>​	下面加上一行：<code>Include conf/extra/httpd-fcgid.conf</code> 。</p>
<p>3、打开&#x2F;conf&#x2F;extra&#x2F;httpd-defaulte.conf文件</p>
<ul>
<li>Timeout 改成 3600</li>
<li>MaxKeepAliveRequests 改成 0</li>
<li>KeepAliveTimeout 改成 3600</li>
</ul>
<p>4、打开php.ini文件，ctrl+f查找<code>&quot;max_execution_time&quot;</code>，它的值改为3600<br>5、在apache的&#x2F;conf&#x2F;extra文件夹下，新建文件<code>httpd-fcgid.conf</code>，内容：</p>
<pre class="line-numbers language-none"><code class="language-none">ProcessLifeTime 3600
FcgidIOTimeout 3600
FcgidConnectTimeout 3600
FcgidOutputBufferSize 128
FcgidMaxRequestsPerProcess 1000
FcgidMinProcessesPerClass 0 
FcgidMaxProcesses 16 
FcgidMaxRequestLen 268435456   
FcgidInitialEnv PHP_FCGI_MAX_REQUESTS 1000
IPCConnectTimeout 3600
IPCCommTimeout 3600
FcgidIdleTimeout 3600
FcgidBusyTimeout 60000
FcgidBusyScanInterval 120
FcgidInitialEnv PHPRC &quot;D:\phpstudy_pro\Extensions\php\php7.3.4nts&quot;
AddHandler fcgid-script .php<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>

        </div>
        <div class="top-div">
          
        </div>
      </div>
    </div>

    
      <div class="next-post">
        <a class="purple-link" href="/2022/09/11/ctfshowssti/">
          <h3 class="post-title">
            下一篇：ctfshow_web入门_ssti
          </h3>
        </a>
      </div>
    
  </div>




<footer>
<div class="site-footer">
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <a href="https://github.com/f-dong/hexo-theme-minimalism" target="_blank">Theme</a>
  
  
  
  
  
  
</div>
</footer>


      </div>
      
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.fancybox.min.js"></script>


<script id="hexo-configurations">
    window.theme_config = {"image":{"lazyload_enable":false}};
    window.is_post = true;
  </script>

<script src="/js/main.js"></script>





    </div>
  </body>
</html>

