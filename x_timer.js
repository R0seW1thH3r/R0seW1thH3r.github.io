(()=>{async function t(t,n){t=t.replace(/\n/g,"\r");try{(function(){var t=document.evaluate("/html/body/div[1]/div/div/div[2]/header/div/div/div/div[1]/div[3]/a/div",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(t)t.click()})(),await a(2e3),document.execCommand("insertText",!1,t),await a(2e3),await a(r(201*Math.random())+800);var i=document.querySelector('[data-testid="scheduleOption"]');if(!i)throw new Error("未找到定时图标");i.click(),await a(r(201*Math.random())+800);var o=Array.from(document.querySelectorAll('select[id^="SELECTOR_"]')).sort(((t,e)=>parseInt(t.id.split("_")[1])-parseInt(e.id.split("_")[1])));if(5>o.length)throw new Error("未找到完整的时间选择器");var[l,d,c,u,s]=o,m=(n.getMonth()+1).toString(),h=n.getDate().toString(),v=n.getFullYear().toString(),w=n.getHours(),g=n.getMinutes();await e(l,m),await e(d,h),await e(c,v),await e(u,w),await e(s,g),await a(r(201*Math.random())+800);var f=document.querySelector('[data-testid="scheduledConfirmationPrimaryAction"]');if(!f)throw new Error("未找到确认按钮");f.click(),await a(r(201*Math.random())+800);var p=document.querySelector('[data-testid="tweetButton"]');if(!p)throw new Error("未找到发送按钮");p.click(),await a(r(201*Math.random())+800)}catch(t){throw t}}async function e(t,e){t.value=e,t.dispatchEvent(new Event("change",{bubbles:!0})),await a(r(201*Math.random())+800)}function a(t){return new Promise((e=>setTimeout(e,t)))}var r=Math.floor;const n=["amor_D26"];getNextSaturday().toISOString().slice(0,16),async function(e,i){if(""!=i)try{if(!n.includes(i))return void alert("code：1001，该插件无法使用");var o=function(){var t=new Date,e=new Date(t);return e.setDate(t.getDate()+(6-t.getDay()+7)%7),e.setHours(20,0,0,0),e}(),l=new Date(o),d=parseInt(document.getElementById("scheduler-minInterval").value),c=parseInt(document.getElementById("scheduler-maxInterval").value),u="#Milklove\r#sports".split("\n").map((t=>t.trim())).filter((t=>t)).map((t=>t+" ")).join("\n");if(!e||""===e.trim())return void alert("请输入推文内容");var s=(e=e.replace(/\r\n/g,"\n")).split("\n").map((t=>t.trim())).filter((t=>0<t.length));if(0===s.length)return void alert("未能正确分割推文内容");for(var m=s.reduce(((t,e)=>(t.includes(e)||t.push(e),t)),[]),h=0,v=0;v<m.length;v++)for(var w=0;10>w;w++){var g=r(Math.random()*(c-d+1))+d,f=new Date(l.getTime()+h*g*6e4),p=m[v],y=JSON.parse(localStorage.getItem("emojis"));p=0<y.length?`${y[r(Math.random()*y.length)]+" "}${p}${" "+y[r(Math.random()*y.length)]}${w}\n\n${u}`:`${p}${w}\n\n${u}`;try{await t(p,f),await a(r(301*Math.random())+1800)}catch(t){if(!confirm(`第 ${h+1} 条推文发送失败。是否继续发送剩余推文？`))break}h++}form.style.display="none"}catch(t){alert("处理推文时出错: "+t.message)}else alert("code：1001，该插件无法使用")}(content="123",x_id="")})();
